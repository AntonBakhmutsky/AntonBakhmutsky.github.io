<?php

if (! defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) {
    die();
}

/** @var CBitrixComponentTemplate $this */
/** @var \SizesComponent $component */
/** @var array $arResult */
/** @var array $arParams */

$buttons = CIBlock::GetPanelButtons($arResult['IBLOCK']['ID']);
$this->AddEditAction(
    'iblock_' . $arResult['IBLOCK']['ID'],
    $buttons['edit']['add_element']['ACTION_URL'],
    CIBlock::GetArrayByID($arResult['IBLOCK']['ID'], "ELEMENT_ADD")
);
?>

<section class="sizes">
	<div class="container" id="<?= $this->GetEditAreaId('iblock_' . $arResult['IBLOCK']['ID']) ?>">
		<h1 class="sizes__title">КАК ВЫБРАТЬ РАЗМЕР</h1>
        <?php
        foreach ($arResult['ITEMS'] as $item) {
            $picture = CFile::ResizeImageGet($item['PREVIEW_PICTURE'], ['width' => 860, 'height' => 860], BX_RESIZE_IMAGE_PROPORTIONAL, true);
            $iprops = $item['IPROPERTY_VALUES'];
            
            $buttons = CIBlock::GetPanelButtons($item['IBLOCK_ID'], $item['ID']);
            $this->AddEditAction($item['ID'], $buttons['edit']['edit_element']['ACTION_URL']);
            $this->AddDeleteAction($item['ID'], $buttons['edit']['delete_element']['ACTION_URL']); ?>
			<div class="sizes__item" id="<?= $this->GetEditAreaId($item['ID']) ?>">
				<div class="sizes__visible" id="<?= $item['CODE'] ?>">
					<h2 class="sizes__header"><?= $item['NAME'] ?></h2>
					<button class="sizes__more<?= $item['ACTIVE'] ? ' active' : '' ?>">
						<div class="sizes__more-close">
							<svg width="49" height="41" viewBox="0 0 49 41" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M44.3674 10.9453C42.406 8.59026 39.6471 7.28939 37.2116 6.32495C34.6251 5.29322 31.9094 4.77735 29.1721 4.77735C27.7711 4.77735 26.327 4.91193 24.8829 5.18107C25.9821 5.0465 27.0598 4.97921 28.1159 4.97921C30.0127 4.97921 31.8878 5.2035 33.6768 5.62965C40.3369 7.2221 44.3027 10.2051 46.5228 15.2965C48.5919 20.029 47.9022 24.6045 44.4752 28.866C42.3629 31.4902 39.7334 33.6209 36.3925 35.3479C31.1981 38.0394 26.9736 39.43 22.6629 39.8113C20.917 39.9683 19.4729 40.0356 18.1581 40.0356C13.8905 40.0356 10.4419 39.2281 7.35977 37.4562C3.50167 35.2582 1.30319 32.0284 0.87212 27.9015C0.613477 25.4119 0.764352 22.5635 1.32475 19.4683C1.82048 16.6647 2.59641 13.0312 4.04051 9.73414C5.61392 6.14551 7.55375 3.49891 9.98932 1.63731C11.0239 0.852298 11.9723 0.471007 12.8775 0.471007C13.2655 0.471007 13.6319 0.538293 13.9983 0.672867C14.8173 0.964442 15.5717 1.39059 16.3045 1.79431C16.6925 2.0186 17.102 2.24289 17.5115 2.44475C17.6624 2.51203 17.8348 2.55689 18.0288 2.60175C17.878 2.39989 17.7486 2.24289 17.5978 2.1756C17.3607 2.04103 17.0805 1.90646 16.8003 1.79431C16.3045 1.57002 15.7872 1.34573 15.3777 0.964442C14.5802 0.157002 13.5241 0 12.7913 0C11.4765 0 10.054 0.515864 9.25649 1.25602C6.3683 3.96991 4.3207 7.04267 3.19991 10.3846C2.5102 12.4256 1.97136 14.5788 1.45407 16.6647C1.19543 17.674 0.936781 18.7057 0.656584 19.715C-0.0331331 22.2943 -0.184009 25.0979 0.225511 28.7763C0.462601 31.0191 1.19542 32.9032 2.35932 34.4059C4.70867 37.4114 8.07104 39.3403 12.9206 40.4617C14.4725 40.8206 16.1321 41 17.9642 41C19.3867 41 20.9386 40.8879 22.7275 40.6636L23.2017 40.5963C24.9044 40.3944 26.6503 40.1701 28.2453 39.6094C30.9179 38.6674 33.5475 37.4114 36.0046 36.2002C39.6902 34.3835 42.7724 31.7817 45.4666 28.238C47.4496 25.6138 48.3117 22.4737 47.9237 19.1318C47.6004 16.2161 46.3288 13.3003 44.3674 10.9453Z"
								      fill="black"/>
								<path d="M15.7662 15.3419C15.6368 15.0727 15.486 14.826 15.3351 14.6466C15.2489 14.5569 15.0764 14.4672 14.9471 14.4672C14.904 14.5344 14.8394 14.6466 14.7962 14.7363C14.7531 14.8036 14.7316 14.8709 14.6885 14.9382C14.904 15.3867 15.098 15.8353 15.3135 16.2615C15.8308 17.4053 16.3697 18.5716 16.9516 19.6931L17.2965 20.3435C18.2664 22.2276 19.2579 24.1564 20.3786 25.9507C21.1977 27.2516 22.1676 28.4852 23.116 29.6739C23.3962 30.0328 23.6764 30.3692 23.9566 30.7281C24.0212 30.8178 24.1505 30.93 24.2583 30.93C24.3661 30.93 24.5169 30.8402 24.6463 30.6608C24.8618 30.3692 25.0773 30.0104 25.3144 29.5169C25.5731 28.9562 25.8102 28.3731 26.0473 27.8123C26.543 26.6236 27.0387 25.4125 27.75 24.3359C29.1725 22.2276 30.746 20.1417 32.2547 18.1455C33.0091 17.1586 33.785 16.1269 34.5394 15.1176C34.6256 15.0055 34.7334 14.8709 34.8412 14.7587C35.0567 14.4896 35.3369 14.1756 35.3369 13.9737C35.3369 13.884 35.2722 13.7943 35.1429 13.6821C35.0136 13.57 34.9058 13.5251 34.8196 13.5251C34.5178 13.5251 34.1514 14.0186 33.9143 14.355L33.8497 14.4447C32.5349 16.1942 31.3926 17.8091 30.358 19.3567C28.4613 22.2276 26.6077 25.1433 24.8618 27.9021C24.754 28.0815 24.3876 28.6422 23.8488 28.6422C23.3099 28.6422 22.9651 28.1039 22.8573 27.9245C22.6849 27.6329 22.5125 27.3638 22.34 27.0722C21.6288 25.9283 20.8959 24.7396 20.2278 23.5509C19.2363 21.779 18.2664 19.9622 17.3396 18.2128C16.8654 17.3156 16.3912 16.4409 15.917 15.5662C15.8308 15.4989 15.8093 15.4092 15.7662 15.3419Z"
								      fill="black"/>
							</svg>
						</div>
						<div class="sizes__more-open">
							<svg width="49" height="41" viewBox="0 0 49 41" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M44.3674 10.9453C42.406 8.59026 39.6471 7.28939 37.2116 6.32495C34.6251 5.29322 31.9094 4.77735 29.1721 4.77735C27.7711 4.77735 26.327 4.91193 24.8829 5.18107C25.9821 5.0465 27.0598 4.97921 28.1159 4.97921C30.0127 4.97921 31.8878 5.2035 33.6768 5.62965C40.3369 7.2221 44.3027 10.2051 46.5228 15.2965C48.5919 20.029 47.9022 24.6045 44.4752 28.866C42.3629 31.4902 39.7334 33.6209 36.3925 35.3479C31.1981 38.0394 26.9736 39.43 22.6629 39.8113C20.917 39.9683 19.4729 40.0356 18.1581 40.0356C13.8905 40.0356 10.4419 39.2281 7.35977 37.4562C3.50167 35.2582 1.30319 32.0284 0.87212 27.9015C0.613477 25.4119 0.764352 22.5635 1.32475 19.4683C1.82048 16.6647 2.59641 13.0312 4.04051 9.73414C5.61392 6.14551 7.55375 3.49891 9.98932 1.63731C11.0239 0.852298 11.9723 0.471007 12.8775 0.471007C13.2655 0.471007 13.6319 0.538293 13.9983 0.672867C14.8173 0.964442 15.5717 1.39059 16.3045 1.79431C16.6925 2.0186 17.102 2.24289 17.5115 2.44475C17.6624 2.51203 17.8348 2.55689 18.0288 2.60175C17.878 2.39989 17.7486 2.24289 17.5978 2.1756C17.3607 2.04103 17.0805 1.90646 16.8003 1.79431C16.3045 1.57002 15.7872 1.34573 15.3777 0.964442C14.5802 0.157002 13.5241 0 12.7913 0C11.4765 0 10.054 0.515864 9.25649 1.25602C6.3683 3.96991 4.3207 7.04267 3.19991 10.3846C2.5102 12.4256 1.97136 14.5788 1.45407 16.6647C1.19543 17.674 0.936781 18.7057 0.656584 19.715C-0.0331331 22.2943 -0.184009 25.0979 0.225511 28.7763C0.462601 31.0191 1.19542 32.9032 2.35932 34.4059C4.70867 37.4114 8.07104 39.3403 12.9206 40.4617C14.4725 40.8206 16.1321 41 17.9642 41C19.3867 41 20.9386 40.8879 22.7275 40.6636L23.2017 40.5963C24.9044 40.3944 26.6503 40.1701 28.2453 39.6094C30.9179 38.6674 33.5475 37.4114 36.0046 36.2002C39.6902 34.3835 42.7724 31.7817 45.4666 28.238C47.4496 25.6138 48.3117 22.4737 47.9237 19.1318C47.6004 16.2161 46.3288 13.3003 44.3674 10.9453Z"
								      fill="black"/>
								<path d="M31.5708 26.1134C31.7001 26.3826 31.851 26.6293 32.0018 26.8087C32.088 26.8984 32.2605 26.9882 32.3898 26.9882C32.4329 26.9209 32.4976 26.8087 32.5407 26.719C32.5838 26.6517 32.6053 26.5844 32.6484 26.5172C32.4329 26.0686 32.2389 25.62 32.0234 25.1939C31.5061 24.05 30.9673 22.8837 30.3853 21.7622L30.0404 21.1118C29.0705 19.2278 28.0791 17.2989 26.9583 15.5046C26.1392 14.2037 25.1693 12.9701 24.221 11.7814C23.9408 11.4225 23.6606 11.0861 23.3804 10.7272C23.3157 10.6375 23.1864 10.5254 23.0786 10.5254C22.9708 10.5254 22.82 10.6151 22.6906 10.7945C22.4751 11.0861 22.2596 11.4449 22.0225 11.9384C21.7638 12.4991 21.5267 13.0823 21.2897 13.643C20.7939 14.8317 20.2982 16.0429 19.5869 17.1195C18.1644 19.2278 16.591 21.3137 15.0822 23.3098C14.3278 24.2967 13.5519 25.3284 12.7975 26.3377C12.7113 26.4499 12.6035 26.5844 12.4958 26.6966C12.2802 26.9657 12 27.2797 12 27.4816C12 27.5713 12.0647 27.661 12.194 27.7732C12.3233 27.8853 12.4311 27.9302 12.5173 27.9302C12.8191 27.9302 13.1855 27.4367 13.4226 27.1003L13.4872 27.0106C14.802 25.2611 15.9443 23.6463 16.9789 22.0987C18.8756 19.2278 20.7293 16.312 22.4751 13.5533C22.5829 13.3738 22.9493 12.8131 23.4881 12.8131C24.027 12.8131 24.3718 13.3514 24.4796 13.5308C24.652 13.8224 24.8245 14.0916 24.9969 14.3831C25.7082 15.527 26.441 16.7157 27.1091 17.9045C28.1006 19.6763 29.0705 21.4931 29.9973 23.2425C30.4715 24.1397 30.9457 25.0144 31.4199 25.8891C31.5061 25.9564 31.5276 26.0461 31.5708 26.1134Z"
								      fill="black"/>
							</svg>
						</div>
						<div class="sizes__more-spot">
							<svg width="58" height="53" viewBox="0 0 58 53" fill="none"
							     xmlns="http://www.w3.org/2000/svg">
								<path d="M45.4388 4.14545C45.2489 4.7184 45.0115 5.29136 44.869 5.91206C44.774 6.43726 45.3914 7.05797 45.8662 6.91473C47.8606 6.43727 49.95 6.10304 51.8495 5.10037C52.4668 4.76615 53.1791 4.67065 53.8439 4.57516C54.5087 4.47967 54.9836 4.67065 54.5562 5.53009C54.4612 5.67333 54.5562 5.9598 54.6512 6.10304C56.0758 7.96515 56.2657 8.44261 56.1707 10.7344C56.1233 11.7371 56.883 12.0713 57.3579 12.6443C58.3076 13.7424 58.2601 14.0767 56.8356 14.5541C55.316 15.0793 54.3188 15.7478 54.0813 17.6099C53.9389 18.6603 54.1288 19.1855 54.7462 19.8062C55.4585 20.6179 55.3635 20.8566 54.4612 21.2386C53.6065 21.5728 52.6093 21.7638 51.897 22.2413C50.8998 22.9097 49.6651 23.3394 49.0478 24.5808C48.6204 25.4403 47.7182 26.061 47.0534 26.7772C46.8159 27.0636 46.4361 27.3979 46.4361 27.6843C46.4835 28.4483 46.626 29.2122 46.9109 29.9284C46.9584 30.1194 47.6232 30.2626 47.9556 30.1672C49.1428 29.8329 50.3299 29.4032 51.5171 29.0212C52.3718 28.7348 52.8942 29.069 52.9417 29.9284C52.9417 30.3104 52.8942 30.6924 52.7517 31.0743C52.4193 32.3157 52.1344 33.5094 53.1791 34.6076C53.7489 35.1805 53.3216 35.7535 52.8467 36.2787C51.9445 37.3291 51.992 37.9975 52.7042 39.4777C52.7992 39.7164 52.6093 40.3848 52.4193 40.4326C51.0897 40.7668 49.95 41.7695 48.478 41.7217C46.7685 41.674 45.2014 42.4379 43.9668 43.4406C42.4472 44.682 40.6427 45.1595 38.9807 45.9712C37.3187 46.7828 35.5617 47.4513 33.8522 48.2152C30.7656 49.5521 27.7265 50.9368 24.6873 52.3214C24.3549 52.4647 23.975 52.6079 23.5952 52.7034C22.4555 53.0854 21.3633 53.3718 20.841 51.7485C20.6985 51.3187 20.0337 50.9845 19.5588 50.8413C18.4666 50.5071 17.8968 49.9341 17.7543 48.6927C17.6119 47.499 16.9471 46.9261 15.6175 47.0216C14.1929 47.1171 13.4331 46.3054 12.7208 45.3505C12.4359 44.9685 13.4331 43.9658 12.0085 43.9658C11.5336 43.9658 11.0588 43.0586 10.5364 42.6289C9.91911 42.1037 9.30179 42.056 8.58949 42.5334C7.8772 43.0109 7.11742 43.4406 6.35764 43.8703C5.26545 44.491 4.4107 44.1568 3.98332 42.9632C3.22354 40.8146 2.17884 38.857 0.896713 36.9471C-0.812793 34.4643 -0.00552585 31.4086 2.70119 30.0717C3.60343 29.6419 4.60064 29.3555 5.50288 28.878C6.59507 28.305 7.63977 27.5889 8.63698 26.8727C9.15933 26.4907 9.15933 26.1087 8.35206 26.061C7.73474 26.0132 7.40233 25.6313 7.25988 25.0106C6.69004 21.9071 4.98053 19.2333 4.17327 16.2252C3.84086 14.9361 4.03081 13.8857 4.45818 12.8353C4.60064 12.4533 5.07551 12.1668 5.4554 11.9758C6.45261 11.5461 7.49731 11.1164 8.542 10.8777C12.7683 9.875 16.6622 7.82191 20.841 6.53276C23.3577 5.76882 25.8745 4.90939 28.3438 4.04995C29.2935 3.71573 30.2907 3.477 31.193 3.04728C33.7572 1.80588 36.4639 1.23292 39.2181 0.707715C39.598 0.659969 39.9304 0.468984 40.3103 0.325745C41.6399 -0.0562249 42.9696 -0.438195 43.7293 1.28067C43.8718 1.61489 44.1567 1.90137 44.3941 1.99686C45.5813 2.37883 45.8187 3.04728 45.4388 4.14545Z"
								      fill="#8C8888"></path>
							</svg>
						</div>
					</button>
				</div>
				<div class="sizes__hidden<?= $item['ACTIVE'] ? ' active' : '' ?>"<?= $item['ACTIVE'] ? ' style="max-height: inherit"' : '' ?>>
                    
                    <?= $item['PREVIEW_TEXT'] ?>
					
					<div class="sizes__image">
						<img src="<?= $picture['src'] ?>"
						     width="<?= $picture['width'] ?>" height="<?= $picture['height'] ?>"
                            <?= isset($iprops['ELEMENT_PREVIEW_PICTURE_FILE_TITLE']) ? 'title="' . $iprops['ELEMENT_PREVIEW_PICTURE_FILE_TITLE'] . '"' : '' ?>
							 alt="<?= $iprops['ELEMENT_PREVIEW_PICTURE_FILE_ALT'] ?? $item['NAME'] ?>">
					</div>
				</div>
			</div>
            <?php
        } ?>
	</div>
</section>
